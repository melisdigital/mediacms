FROM arm64v8/python:3.11.9 AS compile-image

SHELL ["/bin/bash", "-c"]

# Set up virtualenv
ENV VIRTUAL_ENV=/home/mediacms.io
ENV PATH="$VIRTUAL_ENV/bin:$VIRTUAL_ENV/bento4/cmakebuild:$VIRTUAL_ENV/bento4/Source/Python/wrappers:$PATH"
ENV PIP_NO_CACHE_DIR=1

RUN apt-get update -y && apt-get install build-essential cmake -y
RUN mkdir -p /home/mediacms.io/mediacms/{logs} && cd /home/mediacms.io  

 

COPY . /home/mediacms.io/mediacms
WORKDIR /home/mediacms.io/mediacms

RUN apt-get remove build-essential cmake -y && apt-get autoremove -y
